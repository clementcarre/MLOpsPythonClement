# This code is autogenerated.
# Code is generated by running custom script: python3 readme.py
# Any manual changes to this file may cause incorrect behavior.
# Any manual changes will be overwritten if the code is regenerated.

name: Train Pipeline

on:
  push:
    branches: [ "main" ]
  pull_request:
    branches:
      - main
    paths:
      - train
concurrency:
  group: ${{ github.workflow }}-${{ github.event.pull_request.number || github.ref }}
  cancel-in-progress: true
env:
  RESOURCE_GROUP_NAME: azure-ml
  WORKSPACE_NAME: cats-dogs
  SUBSCRIPTION_ID: 9d42c9d4-85ab-429d-afb4-4d77f309078c
jobs:
  build:
    runs-on: ubuntu-latest
    steps:
    - name: check out repo
      uses: actions/checkout@v2
    - name: setup python
      uses: actions/setup-python@v2
      with: 
        python-version: "3.10"
    - name: azure login
      uses: azure/login@v1
      with:
        creds: ${{secrets.AZUREML_CREDENTIALS}}
    - name: run train/azure/run_pipeline.py
      run: |
          pip install azure-ai-ml azure.identity mldesigner
          python run_pipeline.py
      working-directory: train/azure
